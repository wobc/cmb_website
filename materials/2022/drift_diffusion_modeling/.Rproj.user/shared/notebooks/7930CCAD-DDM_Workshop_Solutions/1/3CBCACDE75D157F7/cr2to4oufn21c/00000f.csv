"0","loss_loglik <- function(parms, observed_data){"
"0","  # calculate the likelihood for each response"
"0","  likelihoods <- ddiffusion(rt=observed_data$rt, response=observed_data$response,"
"0","                            v=parms[1], "
"0","                            a=parms[2], "
"0","                            t0=parms[3],"
"0","                            z=.5*parms[2],"
"0","                            s=1)"
"0","  "
"0","  # take negative of the sum of the logged likelihoods (to be minimized)"
"0","  if (any(likelihoods == 0)) return(1e6) # the density is set to 10e6, when the predicted density is smaller than this value. "
"0","  return(-sum(log(likelihoods)))"
"0","}"
